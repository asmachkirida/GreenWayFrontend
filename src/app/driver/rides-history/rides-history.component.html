<!-- rides-history.component.html -->

<div class="rides-history-container">
    <h2>My Rides</h2>

    <h3>Display my rides and add new ones</h3>

    <hr>
  
    <div class="add-ride-container">
      <button class="add-ride-btn" (click)="openAddRideModal()">
        <i class="fa fa-plus"></i> Add Ride
      </button>
    </div>
  
    <div class="rides-table-container">
      <table class="ride-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Start Location</th>
            <th>End Location</th>
            <th>Date</th>
            <th>Start Time</th>
            <th>Passengers</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ride of pagedRides">
            <td>{{ ride.id }}</td>
            <td>{{ ride.startLocation }}</td>
            <td>{{ ride.endLocation }}</td>
            <td>{{ ride.date }}</td>
            <td>{{ ride.startTime }}</td>
            <td>{{ ride.nbrPassengers }}</td>
            <td>{{ ride.status }}</td>
            <td>
              <button class="action-btn edit-btn" (click)="openEditRideModal(ride)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="action-btn delete-btn" (click)="deleteRide(ride.id)">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <div class="pagination">
      <button class="pagination-btn" (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
      <span>Page {{ currentPage }} of {{ totalPages }}</span>
      <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
    </div>
  



<!-- Add Ride Modal -->
<div *ngIf="showAddRideModal" class="modal">
    <div class="modal-content">
      <span class="close" (click)="closeAddRideModal()">&times;</span>
      <h2>Add Ride</h2>
  
      <form (ngSubmit)="addRide()">
        <!-- Location Inputs -->
        <div class="form-group">
          <label for="startLocation">Start Location:</label>
          <input 
            #startLocation 
            id="startLocation" 
            type="text" 
            [(ngModel)]="newRide.startLocation" 
            name="startLocation" 
            required
          >
        </div>
  
        <div class="form-group">
          <label for="endLocation">End Location:</label>
          <input 
            #endLocation 
            id="endLocation" 
            type="text" 
            [(ngModel)]="newRide.endLocation" 
            name="endLocation" 
            required
          >
        </div>
  
        <div class="form-group">
          <label for="add-date">Date:</label>
          <input 
            id="add-date" 
            type="date" 
            [(ngModel)]="newRide.date" 
            name="date" 
            required
          >
        </div>
  
        <div class="form-group">
          <label for="startTime">Start Time:</label>
          <input 
            id="startTime" 
            type="time" 
            [(ngModel)]="newRide.startTime" 
            name="startTime" 
            required
          >
        </div>
  
<select 
  id="car" 
  [(ngModel)]="newRide.carId" 
  name="carId" 
  required
>
  <option *ngFor="let car of cars" [value]="car.id">
    {{ car.brand }}
  </option>
</select>
  <!-- Checkbox Inputs -->
  <div class="form-group checkbox-group">
    <label>
      <input 
        type="checkbox" 
        [(ngModel)]="newRide.cigaretteAllowed" 
        name="cigaretteAllowed"
      >
      Cigarettes Allowed
    </label>
    <label>
      <input 
        type="checkbox" 
        [(ngModel)]="newRide.airConditionning" 
        name="airConditionning"
      >
      Air Conditioning
    </label>
    <label>
      <input 
        type="checkbox" 
        [(ngModel)]="newRide.petAllowed" 
        name="petAllowed"
      >
      Pets Allowed
    </label>
  </div>


  
        <!-- Other Ride Details -->
        <div class="form-group">
          <label for="price">Price:</label>
          <input 
            id="price" 
            type="number" 
            [(ngModel)]="newRide.price" 
            name="price" 
            required
          >
        </div>
  
        <!-- Submit Button -->
        <button type="submit">Add Ride</button>
      </form>
    </div>
  </div>
  
<!-- Modal for editing a ride -->
<div class="modal" *ngIf="showEditRideModal">
    <div class="modal-content">
      <span class="close" (click)="closeEditRideModal()">&times;</span>
      <h2>Edit Ride</h2>
      <form (ngSubmit)="updateRide()">
        <label for="edit-startLocation">Start Location:</label>
        <input id="edit-startLocation" [(ngModel)]="currentRide.startLocation" name="startLocation" required>
  
        <label for="edit-endLocation">End Location:</label>
        <input id="edit-endLocation" [(ngModel)]="currentRide.endLocation" name="endLocation" required>
  
        <label for="edit-date">Date:</label>
        <input id="edit-date" [(ngModel)]="currentRide.date" name="date" type="date" required>
  
        <label for="edit-startTime">Start Time:</label>
        <input id="edit-startTime" [(ngModel)]="currentRide.startTime" name="startTime" type="time" required>
  
        <label for="edit-nbrPassengers">Passengers:</label>
        <input id="edit-nbrPassengers" [(ngModel)]="currentRide.nbrPassengers" name="nbrPassengers" type="number" required>
        
  
        <label for="edit-status">Status:</label>
        <select id="edit-status" [(ngModel)]="currentRide.status" name="status" required>
          <option value="scheduled">Scheduled</option>
          <option value="ongoing">Ongoing</option>
          <option value="finished">Finished</option>
        </select>
  
        <button type="submit">Update Ride</button>
      </form>
    </div>
  </div>


  </div>
  