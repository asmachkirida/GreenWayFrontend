<app-navbar></app-navbar>
<div class="search-form">
    <form>
        <div class="form-group">
            <input type="text" id="depart" name="depart" placeholder="Depart">
            <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="form-group">
            <input type="text" id="destination" name="destination" placeholder="Destination">
            <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="form-group">
            <input type="date" id="date" name="date" placeholder="Date">
            <i class="fas fa-calendar-day"></i>
        </div>
        <div class="form-group passengers-group">
            <input type="number" id="passengers" name="passengers" min="1" value="1" placeholder="Passengers">
            <i class="fas fa-user"></i>
            <button type="button" class="plus-button">+</button>
        </div>
        <button type="submit" class="search-button">Search</button>
    </form>
</div>

<div class="container">
    <div class="left-pane">
        <div class="filter-card">
            <h3>Filters</h3>
            <hr>
            <div class="filter-section">
                <h4>Services</h4>
                <label class="styled-checkbox">
                    <input type="checkbox"  [(ngModel)]="filters.petAllowed" (change)="onFilterChange()">
                    <span>Pets Allowed</span>
                    <mat-icon>pets</mat-icon>
                </label>
                <label class="styled-checkbox">
                    <input type="checkbox" [(ngModel)]="filters.cigaretteAllowed" (change)="onFilterChange()">
                    <span>Cigarettes Allowed</span>
                    <mat-icon>smoking_rooms</mat-icon>
                </label>
                <label class="styled-checkbox">
                    <input type="checkbox" [(ngModel)]="filters.airConditionning" (change)="onFilterChange()">
                    <span>AC Available</span>
                    <mat-icon>ac_unit</mat-icon>
                </label>
            </div>
            <hr>
            <div class="filter-section">
                <h4>Driver</h4>
                <label class="styled-checkbox">
                    <input type="checkbox">
                    <span>Female</span>
                    <mat-icon>female</mat-icon>
                </label>
                <label class="styled-checkbox">
                    <input type="checkbox">
                    <span>Male</span>
                    <mat-icon>male</mat-icon>
                </label>
            </div>
            <hr>
            <div class="filter-section">
                <h4>Price</h4>
                <label class="styled-checkbox">
                    <input type="checkbox">
                    <span>Low to High</span>
                    <mat-icon>arrow_downward</mat-icon>
                </label>
                <label class="styled-checkbox">
                    <input type="checkbox">
                    <span>High to Low</span>
                    <mat-icon>arrow_upward</mat-icon>
                </label>
            </div>
        </div>
    </div>
    <div class="right-pane">
        <div *ngFor="let ride of rides" class="result-card">
          <div class="background-image"></div>
          <div class="result-content">
            <div class="result-header">
              <div class="time">{{ ride.startTime }} - {{ ride.endTime }} <span>({{ ride.duration }}h)</span></div>
   <!-- Removed price and added button here -->
   <button class="book-now-button">Book Now</button>            </div>
            <div class="result-body">
              <div class="route">{{ ride.startLocation }} &rarr; {{ ride.endLocation }}</div>
              <div class="date">{{ ride.date | date:'fullDate' }}</div>
              
              <div class="info-row">
                <div class="info-box car-info">
                  <i class="fas fa-car"></i>
                  <p>{{ ride.car.color }} {{ ride.car.brand }}</p>
                </div>
                <div *ngIf="ride.airConditionning" class="info-box">
                  <i class="fas fa-snowflake"></i>
                </div>
                <div *ngIf="ride.petAllowed" class="info-box">
                  <i class="fas fa-paw"></i>
                </div>
                <div *ngIf="ride.cigaretteAllowed" class="info-box">
                  <i class="fas fa-smoking"></i>
                </div>
                <div class="info-box">
                  <i class="fas fa-user"></i>
                  <p>Passengers: {{ ride.nbrPassengers }}</p>
                </div>
              </div>
              
              <div class="driver-info">
                <div class="driver-details">
                  <div class="driver-header">
                    <span class="driver-name">
                      {{ ride.driver.firstName }} {{ ride.driver.lastName }}
                      <i class="gender-icon" [ngClass]="{'fa fa-male': ride.driver.gender === 'Male', 'fa fa-female': ride.driver.gender === 'Female'}"></i>
                    </span>
                    <span class="separator"> | </span>
                    <span class="driver-bio">{{ ride.driver.bio || 'No bio available' }}</span>
                  </div>
                  <div class="driver-rating">
                    <ng-container *ngFor="let star of getStarsArray(ride.driver.rating)">
                      <i class="fa fa-star" [ngClass]="{'filled': star === 1, 'half-filled': star === 0.7}"></i>
                    </ng-container>
                  </div>
                  <div class="driver-age">Age: {{ ride.driver.age || 'N/A' }}</div>
                </div>
              </div>
              
            </div>
          </div>
        </div>
      </div>
      
      
    
        
</div>
